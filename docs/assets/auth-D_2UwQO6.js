import{e as d,f as i,r as g}from"./db-Ddrb56FG.js";const u=document.getElementById("login"),E=document.getElementById("register"),o=document.querySelectorAll(".tab-btn"),m=localStorage.getItem("cachedEmail");if(m){const t=document.getElementById("login-email"),s=document.getElementById("register-email");t&&(t.value=m),s&&(s.value=m)}o.forEach(t=>{t.addEventListener("click",()=>{const s=t.dataset.tab;o.forEach(a=>a.classList.remove("active")),t.classList.add("active"),document.querySelectorAll(".auth-form").forEach(a=>{a.classList.remove("active")}),document.getElementById(`${s}-form`).classList.add("active")})});u.addEventListener("submit",async t=>{var e;t.preventDefault();const s=document.getElementById("login-email").value,a=document.getElementById("login-password").value,n=document.getElementById("login-message");try{n.textContent="Logging in...",n.className="message";const r=await d(s,a),c=((e=document.getElementById("remember-me"))==null?void 0:e.checked)===!0;i(r,c),n.textContent="Login successful! Redirecting...",n.className="message success",setTimeout(()=>{window.location.href=r.is_admin?"admin.html":"index.html"},1e3)}catch(r){n.textContent=r.message,n.className="message error"}});E.addEventListener("submit",async t=>{var r;t.preventDefault();const s=document.getElementById("register-email").value,a=document.getElementById("register-password").value,n=document.getElementById("register-confirm").value,e=document.getElementById("register-message");if(a!==n){e.textContent="Passwords do not match!",e.className="message error";return}try{e.textContent="Creating account...",e.className="message";const c=await g(s,a);try{localStorage.setItem("cachedEmail",s)}catch{}const l=((r=document.getElementById("register-remember"))==null?void 0:r.checked)===!0;i(c,l),e.textContent="Registration successful! Redirecting...",e.className="message success",setTimeout(()=>{window.location.href="index.html"},1e3)}catch(c){e.textContent=c.message,e.className="message error"}});
