import{g as d,s as l,l as m,a as u,b as p,c as g,d as y}from"./db-Ddrb56FG.js";const h=[{id:"1",name:"Mysore Pak",description:"Traditional South Indian sweet made with finest besan flour and pure ghee",price:399,image_url:"/images/mysore-pak.jpg",category:"Sweet",stock:40},{id:"2",name:"Kaju Barfi",description:"Premium cashew fudge with pure silver foil garnish, perfect gift for special occasions",price:599,image_url:"/images/kaju-barfi.jpg",category:"Sweet",stock:35},{id:"3",name:"Gulab Jamun",description:"Soft khoya dumplings soaked in cardamom and rose-scented sugar syrup",price:249,image_url:"/images/gulab-jamun.jpg",category:"Sweet",stock:60},{id:"4",name:"Rasgulla",description:"Bengali specialty: Soft and spongy cottage cheese balls in light sugar syrup",price:299,image_url:"/images/rasgulla.jpg",category:"Sweet",stock:45},{id:"5",name:"Badam Halwa",description:"Rich almond pudding made with pure ghee and garnished with nuts",price:499,image_url:"/images/badam-halwa.jpg",category:"Sweet",stock:30},{id:"6",name:"Pista Roll",description:"Delicate rolled sweet filled with crushed pistachios and cardamom",price:449,image_url:"/images/pista-roll.jpg",category:"Sweet",stock:40},{id:"7",name:"Laddu",description:"Traditional besan laddus made with ghee and cardamom, perfect for festivals",price:349,image_url:"/images/laddu.webp",category:"Sweet",stock:55},{id:"8",name:"Soan Papdi",description:"Crispy and flaky sweet made with besan flour and ghee",price:299,image_url:"/images/soan-pabdi.webp",category:"Sweet",stock:45},{id:"9",name:"Spicy Murukku",description:"Crispy rice flour spirals with red chili and sesame seeds",price:199,image_url:"/images/murukku.webp",category:"Spicy",stock:70},{id:"10",name:"Chili Jalebi",description:"Traditional jalebi infused with spicy chili oil for a unique twist",price:249,image_url:"/images/jalebi.webp",category:"Spicy",stock:40},{id:"11",name:"Butter Murukku",description:"Traditional South Indian savory snack made with rice flour and butter",price:179,image_url:"/images/murukku.webp",category:"Salty",stock:80},{id:"12",name:"Chakli",description:"Spiral-shaped savory snack made with rice flour and spices",price:229,image_url:"/images/chakli.webp",category:"Salty",stock:60},{id:"13",name:"Chocolate Truffle",description:"Rich chocolate truffle with a smooth ganache center, decorated with cocoa powder",price:299,image_url:"/images/chocolate-truffle.jpg",category:"Combinations",stock:50},{id:"14",name:"Jalebi",description:"Crispy, syrup-soaked spirals with saffron and cardamom flavor, served warm",price:199,image_url:"/images/jalebi.jpg",category:"Combinations",stock:70},{id:"15",name:"Barfi Mix",description:"Assortment of different barfi varieties - kaju, pista, and chocolate",price:699,image_url:"/images/barfi-mix.webp",category:"Combinations",stock:25},{id:"16",name:"Halwa Mix",description:"Delicious mix of badam halwa and carrot halwa with nuts",price:549,image_url:"/images/halwa-mix.webp",category:"Combinations",stock:30}];function f(){const a=d("products");(!a||a.length===0)&&(l("products",h),console.log("Sample products initialized"))}let t=null;async function w(){f(),t=await u(),k(t),await b(),t&&await c()}function k(a){const e=document.getElementById("admin-link"),i=document.getElementById("auth-link"),o=document.getElementById("logout-link"),r=document.getElementById("cart-link"),n=document.getElementById("orders-link");a?(i.style.display="none",o.style.display="block",r.style.display="block",n.style.display="block",a.is_admin&&(e.style.display="block")):(i.style.display="block",o.style.display="none",e.style.display="none",r.style.display="none",n.style.display="none")}async function c(){if(t)try{const a=await g(t.id),e=document.getElementById("cart-count");a.length>0?(e.textContent=a.length,e.style.display="inline-block"):e.style.display="none"}catch(a){console.error("Error updating cart count:",a)}}async function b(){const a=document.getElementById("products-grid");try{const e=await p();if(e.length===0){a.innerHTML='<p class="loading">No products available yet.</p>';return}a.innerHTML=e.map(i=>`
      <div class="product-card">
        <img src="${i.image_url}" alt="${i.name}" class="product-image">
        <div class="product-info">
          <h3 class="product-name">${i.name}</h3>
          <p class="product-description">${i.description}</p>
          <p class="product-price">â‚¹${i.price}/kg</p>
          ${t?`<button class="add-to-cart-btn" onclick="window.handleAddToCart('${i.id}')">Add to Cart</button>`:""}
        </div>
      </div>
    `).join("")}catch(e){console.error("Error loading products:",e),a.innerHTML='<p class="loading">Error loading products. Please try again later.</p>'}}window.handleAddToCart=async function(a){if(!t){alert("Please login to add items to cart"),window.location.href="auth.html";return}try{await y(t.id,a,1),await c();const e=document.createElement("div");e.className="cart-notification",e.textContent="Added to cart!",document.body.appendChild(e),setTimeout(()=>{e.style.opacity="0",setTimeout(()=>e.remove(),300)},2e3)}catch(e){alert("Error adding to cart: "+e.message)}};const s=document.getElementById("logout-btn");s&&s.addEventListener("click",a=>{a.preventDefault(),m(),window.location.href="index.html"});w();
